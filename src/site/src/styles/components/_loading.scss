@use '../abstracts' as *;
@use 'sass:math';

div.loading {
    @keyframes appear {
        from {
            opacity: 0;
        }
    }

    position: absolute;
    overflow: hidden;
    height: min(80%, 300px);
    transform: translate(-50%, -50%);
    animation: appear 0.3s ease-in;
    inset: 50%;
    aspect-ratio: 1 / 1;
    clip-path: circle(50% at center);

    > div {
        $classes: a,
        b,
        c,
        d;
        $duration: 8s;

        @for $i from 1 through length($classes) {
            &##{nth($classes, $i)} {
                animation-duration: $duration - $i * math.$e / 7;
                animation-delay: math.pow(math.$e, $i) * (-1s);
            }
        }

        @keyframes circle {

            0%,
            100%,
            25%,
            50%,
            75% {
                clip-path: circle(100% at center);
            }

            12.5% {
                clip-path: circle(0 at right center);
            }

            37.5% {
                clip-path: circle(0 at bottom center);
            }

            62.5% {
                clip-path: circle(0 at left center);
            }

            87.5% {
                clip-path: circle(0 at top center);
            }
        }

        position: absolute;
        width: 100%;
        height: 100%;
        background: $theme;
        opacity: 0.4;
        animation: circle linear $duration infinite;
    }
}